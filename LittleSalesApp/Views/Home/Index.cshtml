@model IEnumerable<SystemApp.Models.DataModels.Product>
@using Microsoft.AspNetCore.Http
@using SystemSales.AccessLayer
@using SystemApp.Utilities
@using LittleSalesApp.Extensions
@inject ApplicationDbContext context;
@inject IHttpContextAccessor HttpContextAccessor

@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<div>
	@*<div class="p-3 mb-2" style="margin-top:-1em; background-color:#fbfaf6">
			<form class="form-inline my-2 my-lg-0">
				<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
				<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
			</form>
		</div>*@

	<partial name="_PrimaryDefaultBanner" />

	<div class="row container">
		<div class="col-md-3">
			<div class="card mb-3">
				<div class="card-header text-red">Search for products</div>
				<div class="card-body">
					<form method="post" enctype="multipart/form-data">
						<input asp-action="SearchProduct" type="search" class="form-control" />
						<button class="btn btn-info form-control">Search</button>
					</form>
				</div>
			</div>
			<div class="card mb-3">
				<div class="card-header text-red">All Categories</div>
				<div class="card-body">
					@*@foreach (var item in ViewBag.Categories)
		{
			//var categoryName = item.;

		}*@
					<ul class="list-group">
						<a asp-action="#" class="btn btn-primary text-left mb-1" style="text-decoration:none">Electronics <i class="fas fa-chevron-right float-right"></i> </a>
						<a asp-action="#" class="btn btn-primary text-left mb-1" style="text-decoration:none">Clothes <i class="fas fa-chevron-right float-right"></i> </a>
						<a asp-action="#" class="btn btn-primary text-left mb-1" style="text-decoration:none">Testing 1 and 2 <i class="fas fa-chevron-right float-right"></i> </a>
					</ul>
				</div>
			</div>

			<div>
				others
			</div>
		</div>
		<div class="col-md-9 container">
			<div class="card-deck row no-gutters">
				@if (Model.Any())
				{

					@foreach (var item in Model)
					{
						var productImagePath = "~/images/product/uploads/" + item.ProductImagePath;
						<input type="hidden" asp-for="@item.Id" />
						<div class="card">
							<div class="card-body">
								<div class="card-title">
									<span class="text-danger float-right"><strong>&#8358;@item.Price.ToString("#,###")</strong></span>
								</div>						
								<img src="@productImagePath" asp-append-version="true" class="card-img-top img-fluid rounded" style="width:100%; height:100%" />
							</div>
							<div class="card-footer bg-white">
								<h6 class="text-capitalize">@item.ProductName</h6>
								<div class="row">
									<div class="col-md-6">
										<a asp-action="AddToCart" asp-route-prodcutId="@item.Id" class="btn btn-danger form-control"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Buy</a>
									</div>
									<div class="col-md-6">
										<a asp-action="ProductDetails" asp-route-productId="@item.Id" class="btn btn-info form-control"><i class="fa fa-eye" aria-hidden="true"></i> Details</a>
									</div>
								</div>
							</div>
						</div>
						@*<div class="col-lg-4 col-xl-3 col-md-6 pb-4">
								<div class="card" style="border:2px solid #43ac6a;border-radius:5px; width:100%; height:50%">
									<div class="pl-3 pt-1 text-center">
										<h3 class="card-title text-primary"><b>@item.ProductName</b></h3>
									</div>
									<div class="d-flex justify-content-between ">
										<div class="pl-1 text-muted">Price per service</div>
										<div class="pr-1 text-danger h5">$@item.Price</div>
									</div>
									<img src="@productImagePath" asp-append-version="true" class="card-img-top p-2 rounded" />

									<div class="text-muted text-center pb-2">Name</div>
									<a asp-action="Details" class="btn btn-success" style="border-radius:2px;">Details</a>
								</div>
							</div>*@
					}
				}
				else
				{
					<div>
						<p>There are no records in our database yet</p>
					</div>
				}
			</div>
		</div>
	</div>

	<div class="py-3 my-3" style="margin:10px">
		<div class="card mb-5">
			<div class="card-header bg-danger text-white">Best Selling</div>
			<div class="card-body">
				List here
			</div>
		</div>
	</div>

</div>
